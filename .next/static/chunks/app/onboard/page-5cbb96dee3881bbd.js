(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{63728:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>d});var s=r(95155),t=r(12115),l=r(18999);let i=t.forwardRef(function(e,a){let{title:r,titleId:s,...l}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},l),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}),n=["Beer","Wine","Cocktails","Whiskey","Vodka","Gin","Rum","Non-alcoholic"],c=["Live Music","DJ Sets","Comedy Shows","Sports Events","Happy Hour","Special Offers"];function d(){let e=(0,l.useSearchParams)().get("qr"),[a,r]=(0,t.useState)({name:"",phone:"",email:"",dateOfBirth:"",gender:"",drinkPreferences:[],eventPreferences:[],consentGiven:!1}),[d,o]=(0,t.useState)(!1),[m,h]=(0,t.useState)(!1),x=e=>{let{name:s,value:t,type:l}=e.target;if("checkbox"===l){let l=e.target.checked;if("consentGiven"===s)r(e=>({...e,[s]:l}));else{let e=a[s];r(a=>({...a,[s]:l?[...e,t]:e.filter(e=>e!==t)}))}}else r(e=>({...e,[s]:t}))},u=async r=>{r.preventDefault(),o(!0);try{if((await fetch("/api/customers/onboard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,qrCode:e})})).ok)h(!0);else throw Error("Failed to submit form")}catch(e){console.error("Error submitting form:",e),alert("There was an error submitting your information. Please try again.")}finally{o(!1)}};return m?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,s.jsx)(i,{className:"mx-auto h-16 w-16 text-green-500 mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome aboard!"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Thank you for joining us! You'll receive special offers and event notifications via your preferred method."}),(0,s.jsx)("div",{className:"bg-primary-50 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-sm text-primary-700",children:"\uD83C\uDF89 As a welcome gift, enjoy 10% off your next visit!"})})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-primary-600 px-6 py-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Welcome to OneVisit"}),(0,s.jsx)("p",{className:"text-primary-100",children:"Join our community and get personalized offers!"})]}),(0,s.jsxs)("form",{onSubmit:u,className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name *"}),(0,s.jsx)("input",{type:"text",name:"name",id:"name",required:!0,value:a.name,onChange:x,className:"input-field",placeholder:"Enter your full name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number *"}),(0,s.jsx)("input",{type:"tel",name:"phone",id:"phone",required:!0,value:a.phone,onChange:x,className:"input-field",placeholder:"+1 (555) 123-4567"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),(0,s.jsx)("input",{type:"email",name:"email",id:"email",value:a.email,onChange:x,className:"input-field",placeholder:"your@email.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700",children:"Date of Birth"}),(0,s.jsx)("input",{type:"date",name:"dateOfBirth",id:"dateOfBirth",value:a.dateOfBirth,onChange:x,className:"input-field"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Gender"}),(0,s.jsxs)("select",{name:"gender",id:"gender",value:a.gender,onChange:x,className:"input-field",children:[(0,s.jsx)("option",{value:"",children:"Select gender"}),(0,s.jsx)("option",{value:"MALE",children:"Male"}),(0,s.jsx)("option",{value:"FEMALE",children:"Female"}),(0,s.jsx)("option",{value:"OTHER",children:"Other"}),(0,s.jsx)("option",{value:"PREFER_NOT_TO_SAY",children:"Prefer not to say"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Drink Preferences (Select all that apply)"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-4",children:n.map(e=>(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"drinkPreferences",value:e,checked:a.drinkPreferences.includes(e),onChange:x,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e})]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Event Interests (Select all that apply)"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3",children:c.map(e=>(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"eventPreferences",value:e,checked:a.eventPreferences.includes(e),onChange:x,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e})]},e))})]}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,s.jsxs)("label",{className:"flex items-start",children:[(0,s.jsx)("input",{type:"checkbox",name:"consentGiven",checked:a.consentGiven,onChange:x,required:!0,className:"mt-1 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,s.jsxs)("span",{className:"ml-3 text-sm text-gray-700",children:["I consent to receiving promotional messages via SMS/WhatsApp and agree to the"," ",(0,s.jsx)("a",{href:"/privacy",className:"text-primary-600 hover:text-primary-700",children:"Privacy Policy"})," and"," ",(0,s.jsx)("a",{href:"/terms",className:"text-primary-600 hover:text-primary-700",children:"Terms of Service"}),". *"]})]})}),(0,s.jsx)("button",{type:"submit",disabled:d||!a.consentGiven,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Submitting...":"Join OneVisit Community"})]})]})})}},83690:(e,a,r)=>{Promise.resolve().then(r.bind(r,63728))}},e=>{var a=a=>e(e.s=a);e.O(0,[441,684,358],()=>a(83690)),_N_E=e.O()}]);